<!doctype html>
<html>
<script src="vendors/jquery.js"></script>
<!-- Prototype Class for Oriented Object supporting -->
<script type="text/javascript" src="https://raw.githubusercontent.com/fernandojunior/prototype_class.js/master/prototype_class.js"></script>
<script src="../repository.js"></script>
<script src="../repositories/rest.js"></script>

<script type="application/javascript">
    
    var HelloWorldView = View.pextend({
            
        method: "get", // request the repository with get method

        // function to be executed before the call repository method
        before: function(){
            console.log("Before send the call to the API");
            return true; // true: the repository method will be called
        },

        // Success callback
        success: function(response){
        },

        // Error callback
        error: function(r){
            console.log("forced error");
        },

        // always be executed
        finally: function(){
            var content = document.getElementById("content");
            content.innerHTML += "World";
        },

        // RESTFUL API respository
        repository: RESTRepository.create({root_path: "https://gist.github.com/fernandojunior"})
            
    });    
    
    function init(){
        var hw = HelloWorldView.create();        
        // hw.data = {some: data}; or via initializer HelloWorldView.create({some : data});
        hw.render();
    }
   
</script>

<body onload="init()">
    
    <div class=page>
        
        <h1>Orders</h1>

        <div id="content">
            
        </div>
    </div>

</body>
</html>